<Page
    x:Class="DDSStudyOS.App.Pages.AgendaPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d">

    <Grid Padding="16" RowDefinitions="Auto,*,Auto">
        <TextBlock Text="Agenda &amp; Lembretes"
                   FontSize="24"
                   FontWeight="SemiBold" />

        <Grid Grid.Row="1" Margin="0,12,0,0" ColumnDefinitions="1.05*,0.95*" ColumnSpacing="16">
            <Border Grid.Column="0"
                    Background="{ThemeResource SystemControlBackgroundChromeMediumLowBrush}"
                    BorderBrush="{ThemeResource SystemControlForegroundBaseLowBrush}"
                    BorderThickness="1"
                    CornerRadius="8"
                    Padding="14">
                <ScrollViewer VerticalScrollBarVisibility="Auto" VerticalScrollMode="Auto">
                    <StackPanel Spacing="12">
                        <TextBlock Text="Cadastro" FontWeight="SemiBold" Opacity="0.9" />
                        <ComboBox x:Name="CourseCombo" Header="Vincular ao curso (opcional)" />
                        <TextBox x:Name="TitleBox" Header="Título" PlaceholderText="Ex: Entregar projeto final" />

                        <Grid ColumnSpacing="12" ColumnDefinitions="*,*">
                            <DatePicker Grid.Column="0" x:Name="DueDatePicker" Header="Data" />
                            <TimePicker Grid.Column="1" x:Name="DueTimePicker" Header="Hora" />
                        </Grid>

                        <Grid ColumnSpacing="12" ColumnDefinitions="*,*">
                            <ComboBox x:Name="RecurrenceCombo"
                                      Grid.Column="0"
                                      Header="Recorrência" />
                            <ComboBox x:Name="SnoozeCombo"
                                      Grid.Column="1"
                                      Header="Adiar (snooze)" />
                        </Grid>

                        <TextBox x:Name="NotesBox"
                                 Header="Notas (opcional)"
                                 AcceptsReturn="True"
                                 TextWrapping="Wrap"
                                 MinHeight="96"
                                 PlaceholderText="Detalhes do lembrete..." />

                        <StackPanel Orientation="Horizontal" Spacing="8">
                            <Button Content="Salvar (novo)" Click="Create_Click" Style="{StaticResource AccentButtonStyle}" />
                            <Button Content="Atualizar selecionado" Click="Update_Click" />
                            <Button Content="Concluir / próxima" Click="Complete_Click" />
                            <Button Content="Adiar" Click="Snooze_Click" />
                            <Button Content="Excluir selecionado" Click="Delete_Click" />
                            <Button Content="Limpar" Click="Clear_Click" />
                        </StackPanel>

                        <TextBlock x:Name="MsgText"
                                   Text=""
                                   TextWrapping="WrapWholeWords"
                                   Foreground="{ThemeResource SystemControlForegroundAccentBrush}"
                                   FontWeight="SemiBold" />
                    </StackPanel>
                </ScrollViewer>
            </Border>

            <Border Grid.Column="1"
                    Background="{ThemeResource SystemControlBackgroundChromeMediumLowBrush}"
                    BorderBrush="{ThemeResource SystemControlForegroundBaseLowBrush}"
                    BorderThickness="1"
                    CornerRadius="8"
                    Padding="14">
                <StackPanel Spacing="10">
                    <TextBlock Text="Próximos" FontWeight="SemiBold" Opacity="0.9" />
                    <ListView x:Name="RemindersList"
                              SelectionChanged="RemindersList_SelectionChanged"
                              Height="440"
                              BorderBrush="{ThemeResource SystemControlForegroundBaseLowBrush}"
                              BorderThickness="1" />
                    <StackPanel Orientation="Horizontal" Spacing="8">
                        <Button Content="Recarregar" Click="Reload_Click" />
                        <Button Content="Filtrar por curso" Click="FilterByCourse_Click" />
                        <Button Content="Ver todos" Click="ShowAll_Click" />
                    </StackPanel>
                </StackPanel>
            </Border>
        </Grid>

        <InfoBar Grid.Row="2"
                 Margin="0,12,0,0"
                 Title="Dica"
                 Message="Agora você pode definir recorrência e adiar lembretes com snooze sem perder o histórico."
                 IsOpen="True"
                 Severity="Informational" />
    </Grid>
</Page>
