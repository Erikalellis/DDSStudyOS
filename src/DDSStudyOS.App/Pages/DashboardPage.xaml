<Page
    x:Class="DDSStudyOS.App.Pages.DashboardPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d">

    <Grid Padding="24" Background="{ThemeResource ApplicationPageBackgroundThemeBrush}">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>

        <!-- Header -->
        <StackPanel Grid.Row="0" Margin="0,0,0,24">
            <TextBlock Text="DDS StudyOS" Style="{StaticResource TitleTextBlockStyle}" Foreground="{ThemeResource SystemControlForegroundAccentBrush}"/>
            <TextBlock Text="Seu sistema operacional de conhecimento." Style="{StaticResource BodyTextBlockStyle}" Opacity="0.6"/>
        </StackPanel>

        <!-- Content Grid -->
        <Grid Grid.Row="1" ColumnSpacing="24" RowSpacing="24">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="2*" /> <!-- Main Area -->
                <ColumnDefinition Width="1*" /> <!-- Sidebar -->
            </Grid.ColumnDefinitions>

            <!-- Main Area -->
            <StackPanel Grid.Column="0" Spacing="24">
                <!-- Continue Learning Card -->
                <Border Background="{ThemeResource SystemControlBackgroundChromeMediumLowBrush}" CornerRadius="8" Padding="16">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        <StackPanel Spacing="4">
                            <TextBlock Text="CONTINUAR ESTUDANDO" FontSize="12" Opacity="0.6" FontWeight="Bold"/>
                            <TextBlock x:Name="LastCourseTitle" Text="Nenhum curso recente" Style="{StaticResource SubtitleTextBlockStyle}" TextTrimming="CharacterEllipsis"/>
                            <TextBlock x:Name="LastCoursePlatform" Text="Comece agora!" Opacity="0.8"/>
                        </StackPanel>
                        <Button x:Name="ContinueBtn" Grid.Column="1" Content="Retomar" Style="{StaticResource AccentButtonStyle}" Click="Continue_Click" IsEnabled="False"/>
                    </Grid>
                </Border>

                <!-- Quick Actions -->
                <TextBlock Text="Acesso Rápido" Style="{StaticResource SubtitleTextBlockStyle}" Margin="0,8,0,0"/>
                <GridView SelectionMode="None" IsItemClickEnabled="True" ItemClick="QuickAction_Click">
                    <GridView.ItemContainerStyle>
                        <Style TargetType="GridViewItem">
                            <Setter Property="Margin" Value="0,0,12,12"/>
                        </Style>
                    </GridView.ItemContainerStyle>
                    
                    <Border Width="120" Height="100" Background="{ThemeResource SystemControlBackgroundAltHighBrush}" CornerRadius="4" Padding="12" Tag="new_course">
                        <StackPanel>
                            <FontIcon Glyph="&#xE710;" FontSize="24" HorizontalAlignment="Left" Margin="0,0,0,8"/>
                            <TextBlock Text="Novo Curso" TextWrapping="Wrap"/>
                        </StackPanel>
                    </Border>
                    
                    <Border Width="120" Height="100" Background="{ThemeResource SystemControlBackgroundAltHighBrush}" CornerRadius="4" Padding="12" Tag="agenda">
                        <StackPanel>
                            <FontIcon Glyph="&#xE787;" FontSize="24" HorizontalAlignment="Left" Margin="0,0,0,8"/>
                            <TextBlock Text="Ver Agenda" TextWrapping="Wrap"/>
                        </StackPanel>
                    </Border>

                    <Border Width="120" Height="100" Background="{ThemeResource SystemControlBackgroundAltHighBrush}" CornerRadius="4" Padding="12" Tag="browser">
                        <StackPanel>
                            <FontIcon Glyph="&#xE774;" FontSize="24" HorizontalAlignment="Left" Margin="0,0,0,8"/>
                            <TextBlock Text="Navegador" TextWrapping="Wrap"/>
                        </StackPanel>
                    </Border>
                </GridView>
            </StackPanel>

            <!-- Sidebar -->
            <StackPanel Grid.Column="1" Spacing="24">
                <!-- Streak Widget -->
                <Border Background="{ThemeResource SystemControlBackgroundChromeMediumLowBrush}" CornerRadius="8" Padding="16">
                    <StackPanel HorizontalAlignment="Center" Spacing="4">
                        <FontIcon Glyph="&#xE735;" FontSize="32" Foreground="#FFD700"/>
                        <TextBlock x:Name="StreakText" Text="0" FontSize="36" FontWeight="Bold" HorizontalAlignment="Center"/>
                        <TextBlock Text="Dias seguidos" Opacity="0.7" HorizontalAlignment="Center"/>
                    </StackPanel>
                </Border>

                <!-- Reminders Widget -->
                <StackPanel Spacing="8">
                    <TextBlock Text="Próximos Lembretes" Style="{StaticResource SubtitleTextBlockStyle}"/>
                    <ListView x:Name="RemindersList" Height="300" SelectionMode="None">
                        <ListView.ItemTemplate>
                            <DataTemplate>
                                <StackPanel Spacing="2" Padding="0,4">
                                    <TextBlock Text="{Binding Title}" FontWeight="SemiBold"/>
                                    <TextBlock Text="{Binding DueAt}" FontSize="12" Opacity="0.6"/>
                                </StackPanel>
                            </DataTemplate>
                        </ListView.ItemTemplate>
                    </ListView>
                </StackPanel>
            </StackPanel>
        </Grid>
    </Grid>
</Page>
