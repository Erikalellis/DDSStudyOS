<Page
    x:Class="DDSStudyOS.App.Pages.DevelopmentPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    Loaded="Page_Loaded"
    mc:Ignorable="d">

    <Grid Padding="16" RowDefinitions="Auto,*">
        <TextBlock Text="Desenvolvimento" FontSize="24" FontWeight="SemiBold" />

        <ScrollViewer Grid.Row="1" Margin="0,12,0,0">
        <StackPanel Spacing="12">
            <InfoBar Title="Versão beta"
                     Message="O DDS StudyOS está em desenvolvimento ativo. Algumas funções podem estar incompletas ou mudar a qualquer momento."
                     IsOpen="True"
                     Severity="Informational" />

            <TextBlock x:Name="CurrentVersionText" Opacity="0.8" />

            <Border Background="{ThemeResource SystemControlBackgroundChromeMediumLowBrush}" CornerRadius="8" Padding="14">
                <StackPanel Spacing="10">
                    <TextBlock Text="Atualizacao do aplicativo" FontWeight="SemiBold"/>
                    <TextBlock Text="Verifique novas versoes publicadas no GitHub e abra a pagina de update quando desejar."
                               Opacity="0.8"
                               TextWrapping="WrapWholeWords"/>

                    <Grid ColumnSpacing="10">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="280"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>

                        <StackPanel Grid.Column="0" Spacing="6">
                            <TextBlock Text="Canal de atualizacao" Opacity="0.8"/>
                            <ComboBox x:Name="UpdateChannelCombo"
                                      SelectionChanged="UpdateChannelCombo_SelectionChanged">
                                <ComboBoxItem Content="Estavel (recomendado)" Tag="stable" />
                                <ComboBoxItem Content="Beta (testers)" Tag="beta" />
                            </ComboBox>
                        </StackPanel>

                        <ToggleSwitch x:Name="UpdateAutoCheckToggle"
                                      Grid.Column="1"
                                      Header="Checar automaticamente ao abrir esta tela"
                                      Toggled="UpdateAutoCheckToggle_Toggled"
                                      OffContent="Desativado"
                                      OnContent="Ativado"/>
                    </Grid>

                    <StackPanel Orientation="Horizontal" Spacing="8">
                        <Button x:Name="CheckUpdateButton" Content="Verificar agora" Click="CheckUpdates_Click" Style="{StaticResource AccentButtonStyle}" />
                        <Button x:Name="InstallUpdateButton" Content="Atualizar agora" Click="InstallUpdate_Click" IsEnabled="False" Style="{StaticResource AccentButtonStyle}" />
                        <Button x:Name="OpenUpdateButton" Content="Abrir atualizacao" Click="OpenUpdate_Click" IsEnabled="False" />
                        <ProgressRing x:Name="UpdateProgressRing" Width="20" Height="20" IsActive="False" />
                    </StackPanel>

                    <TextBlock x:Name="UpdateStatusText"
                               Text="Status: ainda nao verificado."
                               Opacity="0.8"
                               TextWrapping="WrapWholeWords"/>

                    <InfoBar x:Name="UpdateInfoBar"
                             IsOpen="False"
                             Severity="Informational"
                             Title="Atualizacao"
                             Message="Status de atualizacao." />
                </StackPanel>
            </Border>

            <TextBlock Text="Desenvolvido por Erika Lellis &amp; Deep Darkness Studios" FontSize="16" />

            <StackPanel Orientation="Horizontal" Spacing="8">
                <TextBlock Text="Contato:" VerticalAlignment="Center" />
                <HyperlinkButton Content="erikalellis.dev@gmail.com" Click="Email_Click" />
            </StackPanel>

            <StackPanel Orientation="Horizontal" Spacing="8">
                <TextBlock Text="Site:" VerticalAlignment="Center" />
                <HyperlinkButton Content="http://177.71.165.60/" Click="Site_Click" />
            </StackPanel>

            <StackPanel Orientation="Horizontal" Spacing="12">
                <Button Content="Enviar feedback" Click="Feedback_Click" Style="{StaticResource AccentButtonStyle}" />
                <HyperlinkButton Content="GitHub (Issues)" NavigateUri="https://github.com/Erikalellis/DDSStudyOS/issues" />
            </StackPanel>

            <Border Background="{ThemeResource SystemControlBackgroundChromeMediumLowBrush}" CornerRadius="8" Padding="14">
                <StackPanel Spacing="8">
                    <TextBlock Text="Melhorias desta fase (beta)" FontWeight="SemiBold"/>
                    <TextBlock Text="• Correções no navegador interno e estabilidade de navegação."/>
                    <TextBlock Text="• Melhorias em onboarding/tour guiado."/>
                    <TextBlock Text="• Ajustes em cursos, favoritos e fluxo de estudo."/>
                    <TextBlock Text="• Evolução contínua do instalador e experiência inicial."/>
                </StackPanel>
            </Border>

            <Border Background="{ThemeResource SystemControlBackgroundChromeMediumLowBrush}" CornerRadius="8" Padding="14">
                <StackPanel Spacing="8">
                    <TextBlock x:Name="NextUpdateTitleText" Text="Próxima atualização" FontWeight="SemiBold"/>
                    <TextBlock Text="• Refino de navegação entre Cursos e Navegador interno."/>
                    <TextBlock Text="• Melhorias de visibilidade em formulários e onboarding."/>
                    <TextBlock Text="• Ajustes finais no tour guiado (textos, posição e retorno)."/>
                    <TextBlock Text="• Correções de estabilidade no fluxo de voltar/sair do navegador."/>
                </StackPanel>
            </Border>

            <Border Background="{ThemeResource SystemControlBackgroundChromeMediumLowBrush}" CornerRadius="8" Padding="14">
                <StackPanel Spacing="8">
                    <TextBlock Text="Roadmap pós-beta (Fase 2)" FontWeight="SemiBold"/>
                    <TextBlock Text="• Evoluir o atualizador automático (rollback e canary)."/>
                    <TextBlock Text="• Exportar/importar configurações do usuário."/>
                    <TextBlock Text="• Telemetria opcional de erros (com consentimento)."/>
                    <TextBlock Text="• Métricas semanais reais no dashboard."/>
                    <StackPanel Orientation="Horizontal" Spacing="8">
                        <HyperlinkButton Content="Ver changelog" NavigateUri="https://github.com/Erikalellis/DDSStudyOS/blob/main/CHANGELOG.md" />
                        <HyperlinkButton Content="Acompanhar issues" NavigateUri="https://github.com/Erikalellis/DDSStudyOS/issues" />
                    </StackPanel>
                </StackPanel>
            </Border>

            <InfoBar Title="Nota" Message="Essa página é para informações de desenvolvimento, créditos e suporte." IsOpen="True" Severity="Informational" />
        </StackPanel>
        </ScrollViewer>
    </Grid>
</Page>
