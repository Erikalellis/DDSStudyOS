<Page
    x:Class="DDSStudyOS.App.Pages.DevelopmentPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    Loaded="Page_Loaded"
    mc:Ignorable="d">

    <Grid Padding="16" RowDefinitions="Auto,*">
        <StackPanel Orientation="Horizontal" Spacing="10" VerticalAlignment="Center">
            <TextBlock Text="Desenvolvimento" FontSize="24" FontWeight="SemiBold" />
            <Border x:Name="ReleaseBadgeBorder"
                    CornerRadius="999"
                    BorderThickness="1"
                    Background="#334AC277"
                    BorderBrush="#998CE8B3"
                    Padding="10,2">
                <TextBlock x:Name="ReleaseBadgeText"
                           Text="STABLE"
                           FontWeight="SemiBold"
                           Foreground="#FF1F6A3B"
                           FontSize="14" />
            </Border>
        </StackPanel>

        <ScrollViewer Grid.Row="1" Margin="0,12,0,0">
        <StackPanel Spacing="12">
            <InfoBar x:Name="ReleaseChannelInfoBar"
                     Title="Canal de release"
                     Message="Canal de atualização em uso nesta instalação."
                     IsOpen="True"
                     Severity="Informational" />

            <TextBlock x:Name="CurrentVersionText" Opacity="0.8" />

            <Border Background="{ThemeResource SystemControlBackgroundChromeMediumLowBrush}" CornerRadius="8" Padding="14">
                <StackPanel Spacing="10">
                    <TextBlock Text="Atualizacao do aplicativo" FontWeight="SemiBold"/>
                    <TextBlock Text="Verifique novas versoes publicadas no GitHub e abra a pagina de update quando desejar."
                               Opacity="0.8"
                               TextWrapping="WrapWholeWords"/>

                    <Grid ColumnSpacing="10">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="280"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>

                        <StackPanel Grid.Column="0" Spacing="6">
                            <TextBlock Text="Canal de atualizacao" Opacity="0.8"/>
                            <ComboBox x:Name="UpdateChannelCombo"
                                      SelectionChanged="UpdateChannelCombo_SelectionChanged">
                                <ComboBoxItem Content="Estavel (recomendado)" Tag="stable" />
                                <ComboBoxItem Content="Beta (testers)" Tag="beta" />
                            </ComboBox>
                        </StackPanel>

                        <ToggleSwitch x:Name="UpdateAutoCheckToggle"
                                      Grid.Column="1"
                                      Header="Checar automaticamente ao abrir esta tela"
                                      Toggled="UpdateAutoCheckToggle_Toggled"
                                      OffContent="Desativado"
                                      OnContent="Ativado"/>
                    </Grid>

                    <StackPanel Orientation="Horizontal" Spacing="8">
                        <Button x:Name="CheckUpdateButton" Content="Verificar agora" Click="CheckUpdates_Click" Style="{StaticResource AccentButtonStyle}" />
                        <Button x:Name="InstallUpdateButton" Content="Atualizar agora" Click="InstallUpdate_Click" IsEnabled="False" Style="{StaticResource AccentButtonStyle}" />
                        <Button x:Name="OpenUpdateButton" Content="Abrir atualizacao" Click="OpenUpdate_Click" IsEnabled="False" />
                        <ProgressRing x:Name="UpdateProgressRing" Width="20" Height="20" IsActive="False" />
                    </StackPanel>

                    <TextBlock x:Name="UpdateStatusText"
                               Text="Status: ainda nao verificado."
                               Opacity="0.8"
                               TextWrapping="WrapWholeWords"/>

                    <InfoBar x:Name="UpdateInfoBar"
                             IsOpen="False"
                             Severity="Informational"
                             Title="Atualizacao"
                             Message="Status de atualizacao." />
                </StackPanel>
            </Border>

            <Border Background="{ThemeResource SystemControlBackgroundChromeMediumLowBrush}" CornerRadius="8" Padding="14">
                <StackPanel Spacing="10">
                    <TextBlock Text="Atualizacao incremental (DLC)" FontWeight="SemiBold"/>
                    <TextBlock Text="Baixa apenas modulos alterados em segundo plano e aplica sem reinstalar o app base."
                               Opacity="0.8"
                               TextWrapping="WrapWholeWords"/>

                    <StackPanel Orientation="Horizontal" Spacing="8">
                        <Button x:Name="CheckDlcButton" Content="Checar DLC" Click="CheckDlc_Click" />
                        <Button x:Name="ApplyDlcButton" Content="Aplicar DLC" Click="ApplyDlc_Click" IsEnabled="False" Style="{StaticResource AccentButtonStyle}" />
                        <Button x:Name="OpenModulesFolderButton" Content="Abrir pasta de modulos" Click="OpenModulesFolder_Click" />
                        <ProgressRing x:Name="DlcProgressRing" Width="20" Height="20" IsActive="False" />
                    </StackPanel>

                    <TextBlock x:Name="DlcStatusText"
                               Text="Status DLC: ainda nao verificado."
                               Opacity="0.8"
                               TextWrapping="WrapWholeWords"/>

                    <InfoBar x:Name="DlcInfoBar"
                             IsOpen="False"
                             Severity="Informational"
                             Title="DLC"
                             Message="Status do update incremental." />
                </StackPanel>
            </Border>

            <TextBlock Text="Desenvolvido por Erika Lellis &amp; Deep Darkness Studios" FontSize="16" />

            <StackPanel Orientation="Horizontal" Spacing="8">
                <TextBlock Text="Contato:" VerticalAlignment="Center" />
                <HyperlinkButton Content="erikalellis.dev@gmail.com" Click="Email_Click" />
            </StackPanel>

            <StackPanel Orientation="Horizontal" Spacing="8">
                <TextBlock Text="Site:" VerticalAlignment="Center" />
                <HyperlinkButton Content="http://177.71.165.60/" Click="Site_Click" />
            </StackPanel>

            <StackPanel Orientation="Horizontal" Spacing="12">
                <Button Content="Enviar feedback" Click="Feedback_Click" Style="{StaticResource AccentButtonStyle}" />
                <HyperlinkButton Content="GitHub (Updates)" Click="OpenPublicRepo_Click" />
            </StackPanel>

            <Border Background="{ThemeResource SystemControlBackgroundChromeMediumLowBrush}" CornerRadius="8" Padding="14">
                <StackPanel Spacing="8">
                    <TextBlock Text="Base estavel 3.2.0" FontWeight="SemiBold"/>
                    <TextBlock Text="• Novo onboarding em 4 etapas com validacao por passo."/>
                    <TextBlock Text="• Shell lateral proprio para substituir o NavigationView."/>
                    <TextBlock Text="• Branding fixo da janela e Pomodoro sem sobrescrever o cabecalho."/>
                    <TextBlock Text="• Base pronta para ciclos incrementais em modelo DLC."/>
                </StackPanel>
            </Border>

            <Border Background="{ThemeResource SystemControlBackgroundChromeMediumLowBrush}" CornerRadius="8" Padding="14">
                <StackPanel Spacing="8">
                    <TextBlock x:Name="NextUpdateTitleText" Text="Proximo pack DLC" FontWeight="SemiBold"/>
                    <TextBlock Text="• 3.2.1 - Checkpoint: web-content, onboarding-content e branding-assets."/>
                    <TextBlock Text="• Nova home interna do navegador, paginas dds:// refinadas e 404 personalizada."/>
                    <TextBlock Text="• Polimento do onboarding, mensagens de boas-vindas e assets visuais."/>
                    <TextBlock Text="• Entrega incremental sem reinstalar a base do app."/>
                </StackPanel>
            </Border>

            <Border Background="{ThemeResource SystemControlBackgroundChromeMediumLowBrush}" CornerRadius="8" Padding="14">
                <StackPanel Spacing="8">
                    <TextBlock Text="Proximos packs" FontWeight="SemiBold"/>
                    <TextBlock Text="• 3.2.2 - Power-Up: study-templates, pomodoro-presets e help-center."/>
                    <TextBlock Text="• 3.2.3 - Signal Boost: browser-presets, notification-pack e community-feed."/>
                    <TextBlock Text="• 3.3.0 - Quest Hub: nova leva de recursos que exigem atualizacao completa do core."/>
                    <TextBlock Text="• A linha 3.2.x sera focada em conteudo, presets, branding e comunicacao dentro do app."/>
                    <StackPanel Orientation="Horizontal" Spacing="8">
                        <HyperlinkButton Content="Ver changelog" Click="OpenPublicChangelog_Click" />
                        <HyperlinkButton Content="Ver roadmap publico" Click="OpenPublicRoadmap_Click" />
                    </StackPanel>
                </StackPanel>
            </Border>

            <InfoBar Title="Nota" Message="Essa página é para informações de desenvolvimento, créditos e suporte." IsOpen="True" Severity="Informational" />
        </StackPanel>
        </ScrollViewer>
    </Grid>
</Page>

